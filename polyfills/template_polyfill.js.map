{"version":3,"file":"template_polyfill.js","sourceRoot":"","sources":["../src/polyfills/template_polyfill.ts"],"names":[],"mappings":"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","sourcesContent":["if (typeof HTMLTemplateElement === 'undefined') {\n  const capturedCreateElement = Document.prototype.createElement;\n  //const capturedCloneNode = Node.prototype.cloneNode;\n  const contentDoc = document.implementation.createHTMLDocument('template');\n  //const contentDoc = document.implementation.createDocument(\n  //'http://www.w3.org/1999/xhtml',\n  //'html',\n  //null\n  //);\n  //const contentDocBody = document.createElementNS(\n  //'http://www.w3.org/1999/xhtml',\n  //'body'\n  //);\n  //contentDoc.documentElement.appendChild(contentDocBody);\n\n  const PolyfilledHTMLTemplateElement: any = function() {};\n  /**\n   * Provides a minimal shim for the <template> element.\n   */\n  PolyfilledHTMLTemplateElement.prototype = Object.create(\n    HTMLElement.prototype\n  );\n\n  const defineInnerHTML = function defineInnerHTML(obj: any) {\n    Object.defineProperty(obj, 'innerHTML', {\n      set: function(text) {\n        console.log(text);\n        contentDoc.body.innerHTML = text;\n        while (this.content.firstChild) {\n          this.content.removeChild(this.content.firstChild);\n        }\n        const body = contentDoc.body;\n        while (body.firstChild) {\n          this.content.append(body.firstChild);\n        }\n      },\n      configurable: true\n    });\n  };\n\n  defineInnerHTML(PolyfilledHTMLTemplateElement.prototype);\n\n  PolyfilledHTMLTemplateElement.decorate = function(template: any) {\n    // if the template is decorated or not in HTML namespace, return fast.\n    //delete template.content;\n    if (\n      template.content ||\n      template.namespaceURI !== document.documentElement.namespaceURI\n    ) {\n      return;\n    }\n    template.content = contentDoc.createDocumentFragment();\n    let child;\n    while ((child = template.firstChild)) {\n      template.content.appendChild(child);\n    }\n    template.__proto__ = PolyfilledHTMLTemplateElement.prototype;\n  };\n\n  //PolyfilledHTMLTemplateElement._cloneNode = function(\n  //template: any,\n  //deep: boolean\n  //) {\n  //const clone = capturedCloneNode.call(template, false);\n  //this.decorate(clone);\n  //if (deep) {\n  //clone.content.appendChild(capturedCloneNode.call(template.content, true));\n  //fixClonedDom(clone.content, template.content);\n  //}\n  //return clone;\n  //};\n\n  //const fixClonedDom = function(clone: any, source: any) {\n  //// do nothing if cloned node is not an element\n  //if (!source.querySelectorAll) return;\n  //// these two lists should be coincident\n  //const s$ = source.querySelectorAll('template');\n  //if (s$.length === 0) {\n  //return;\n  //}\n  //const t$ = clone.querySelectorAll('template');\n  //for (let i = 0, l = t$.length, t, s; i < l; i++) {\n  //s = s$[i];\n  //t = t$[i];\n  //PolyfilledHTMLTemplateElement.decorate(s);\n  //t.parentNode.replaceChild(cloneNode.call(s, true), t);\n  //}\n  //};\n\n  //const cloneNode = (Node.prototype.cloneNode = function(deep: boolean) {\n  //let dom;\n  //if (\n  //this.nodeType === Node.ELEMENT_NODE &&\n  //this.localName === 'template' &&\n  //this.namespaceURI === document.documentElement.namespaceURI\n  //) {\n  //dom = PolyfilledHTMLTemplateElement._cloneNode(this, deep);\n  //} else {\n  //dom = capturedCloneNode.call(this, deep);\n  //}\n  //if (deep) {\n  //fixClonedDom(dom, this);\n  //}\n  //return dom;\n  //});\n\n  Document.prototype.createElement = function createElement() {\n    let el = capturedCreateElement.apply(this, arguments);\n    if (el.localName === 'template') {\n      el = capturedCreateElement.call(this, 'div');\n      PolyfilledHTMLTemplateElement.decorate(el);\n    }\n    return el;\n  };\n\n  (window as any).HTMLTemplateElement = PolyfilledHTMLTemplateElement;\n}\n"]}