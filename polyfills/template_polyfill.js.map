{"version":3,"file":"template_polyfill.js","sourceRoot":"","sources":["../src/polyfills/template_polyfill.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;GAoBG;AACH,IAAI,OAAO,mBAAmB,KAAK,WAAW,EAAE;IAC9C,IAAI,UAAoB,CAAC;IACzB,IAAI,OAAO,QAAQ,CAAC,cAAc,CAAC,kBAAkB,KAAK,UAAU,EAAE;QACpE,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;KACrE;SAAM;QACL,gDAAgD;QAChD,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CACjD,8BAA8B,EAC9B,MAAM,EACN,IAAI,CACL,CAAC;QACF,MAAM,cAAc,GAAG,QAAQ,CAAC,eAAe,CAC7C,8BAA8B,EAC9B,MAAM,CACP,CAAC;QACF,UAAU,CAAC,eAAe,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;KACxD;IAED,MAAM,OAAO,GAAG,UAAS,QAAa;QACpC,QAAQ,CAAC,OAAO,GAAG,UAAU,CAAC,sBAAsB,EAAE,CAAC;QACvD,eAAe,CAAC,QAAQ,CAAC,CAAC;IAC5B,CAAC,CAAC;IAEF,MAAM,eAAe,GAAG,UAAS,GAAQ;QACvC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,WAAW,EAAE;YACtC,GAAG,EAAE,UAAS,IAAI;gBAChB,UAAU,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACjC,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;oBAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;iBACnD;gBACD,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC;gBAC7B,OAAO,IAAI,CAAC,UAAU,EAAE;oBACtB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACtC;YACH,CAAC;YACD,YAAY,EAAE,IAAI;SACnB,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,qBAAqB,GAAG,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC;IAC/D,QAAQ,CAAC,SAAS,CAAC,aAAa,GAAG;QACjC,IAAI,EAAE,GAAG,qBAAqB,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACtD,IAAI,EAAE,CAAC,SAAS,KAAK,UAAU,EAAE;YAC/B,EAAE,GAAG,qBAAqB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YAClD,OAAO,CAAC,EAAE,CAAC,CAAC;SACb;QACD,OAAO,EAAE,CAAC;IACZ,CAAC,CAAC;CACH","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n *\n * A lightweight <template> polyfill that supports minimum features to cover\n * lit-html use cases. It provides an alternate route in case <template> is not\n * natively supported.\n * Please note that nested template, cloning template node and innerHTML getter\n * do NOT work with this polyfill.\n * If it can not fullfill your requirement, please consider using the full\n * polyfill: https://github.com/webcomponents/template\n */\nif (typeof HTMLTemplateElement === 'undefined') {\n  let contentDoc: Document;\n  if (typeof document.implementation.createHTMLDocument === 'function') {\n    contentDoc = document.implementation.createHTMLDocument('template');\n  } else {\n    // Cobalt does not implement createHTMLDocument.\n    contentDoc = document.implementation.createDocument(\n      'http://www.w3.org/1999/xhtml',\n      'html',\n      null\n    );\n    const contentDocBody = document.createElementNS(\n      'http://www.w3.org/1999/xhtml',\n      'body'\n    );\n    contentDoc.documentElement.appendChild(contentDocBody);\n  }\n\n  const upgrade = function(template: any) {\n    template.content = contentDoc.createDocumentFragment();\n    defineInnerHTML(template);\n  };\n\n  const defineInnerHTML = function(obj: any) {\n    Object.defineProperty(obj, 'innerHTML', {\n      set: function(text) {\n        contentDoc.body.innerHTML = text;\n        while (this.content.firstChild) {\n          this.content.removeChild(this.content.firstChild);\n        }\n        const body = contentDoc.body;\n        while (body.firstChild) {\n          this.content.append(body.firstChild);\n        }\n      },\n      configurable: true\n    });\n  };\n\n  const capturedCreateElement = Document.prototype.createElement;\n  Document.prototype.createElement = function createElement() {\n    let el = capturedCreateElement.apply(this, arguments);\n    if (el.localName === 'template') {\n      el = capturedCreateElement.call(this, 'template');\n      upgrade(el);\n    }\n    return el;\n  };\n}\n"]}